<!DOCTYPE html>
<html>
<!-- Thx to http://reactfordesigners.com/labs/reactjs-introduction-for-people-who-know-just-enough-jquery-to-get-by/ -->
<head>
  <script src="react/react.min.js"></script>
  <script src="react/JSXTransformer.js"></script>
  <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
  <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
      extensions: ["tex2jax.js","fp.js"],
      MathMenu: {
          showLocale: false,
      },
      jax: ["input/TeX","output/HTML-CSS"],
      tex2jax: {
          inlineMath: [['$','$']],
          displayMath: [['$$','$$']],
          }
      });
  </script>
  <script type="text/javascript" src="mathjax/MathJax.js?locale=fr"></script>
  <script type="text/javascript" src="mathjax-preview/mathjax-preview.js"></script>
  <link href="mathjax-preview/mathjax-preview.css" rel="stylesheet" type="text/css" />
  <script src="int.js" type="text/javascript"></script>
  <script src="emulisp_core.js" type="text/javascript"></script>
  <link href="style.css" rel="stylesheet" type="text/css" />
  <meta charset="utf-8">
  <title>Expressions interactives</title>
</head>
<body>
  <div id="jsx"></div>
  <script>
    EMULISP_CORE.loadLisp("picolisp.l");
    EMULISP_CORE.loadLisp("interexpr.l");
  </script>
  <script type="text/jsx">
  var InterExpr = React.createClass({
    getInitialState: function() {
      return {
        text: ""
      };
    },
    handleChange: function(event) {
      this.setState({ text: event.target.value });
      MathPreview.Update();
    },
    render: function() {
      return (
        <div className="well clearfix">
          <div id="math">
            <span id="math-preview"></span>
            <span id="math-buffer"></span>
          </div>
          <span>{this.state.text.length === 0 ?
                 "Tapez votre expression ci-dessous, puis validez avec OK." :
                 "Â "}</span>
          <div id="lisp-error"></div>
          <textarea className="form-control" id="math-input"
                    onChange={this.handleChange}></textarea>
          <br/>
          <button className="btn btn-primary pull-right"
                  disabled={this.state.text.length === 0}>OK</button>
        </div>
      );
    }
  });
  React.render(
    <InterExpr />,
    document.getElementById('jsx')
  );
  MathPreview.Init("math-input", "math-preview", "math-buffer", "lisp-error");
  </script>
</body>
</html>